{"version":3,"sources":["img/medal_32_32.png","panels/home/searchbanner/SearchBanner.js","panels/home/searchblock/SearchBlock.js","panels/home/Home.js","panels/configuration/Configuration.js","App.js","index.js"],"names":["module","exports","SearchBanner","firstName","personCount","lastName","searchButton","Div","n","text_forms","n1","Math","abs","declOfNum","Button","size","className","title","onClick","SearchBlock","isMobileDevice","onLabelChange","handleKeyDown","personTotalCount","undefined","placeHolder","Search","placeholder","id","type","onChange","onKeyDown","getSearchField","mode","Home","go","fetchedUser","vkGroupId","isCommunityAdmin","useState","getLastName","setLastName","getFirstName","setFirstName","setPersonCount","searchText","setSearchTest","widgetError","setWidgetError","widgetErrorMessage","setWidgetErrorMessage","useEffect","a","bridge","send","user","last_name","length","first_name","fetch","response","json","hasOwnProperty","count","console","log","fetchUserData","openSearchWindow","searchToken","window","open","showFoundedRecords","search","Panel","PanelHeader","right","data-to","before","PanelHeaderContent","Avatar","src","logo","Group","Separator","e","key","document","body","clientWidth","event","target","value","Snackbar","layout","onClose","style","backgroundColor","fill","width","height","duration","Configuration","communityToken","vkAppId","getCommunityAccessToken","bridgeError","bridgeErrorMessage","unsupportedPlatform","setUnsupportedPlatform","setTitle","text","setText","descr","setDescr","more","setMore","activeTab","setActiveTab","moreUrl","setMoreUrl","left","PanelHeaderBack","class","Tabs","TabsItem","selected","FormLayout","Input","top","maxLength","status","bottom","Textarea","disabled","display","justifyContent","groupId","Number","then","r","result","catch","error_data","error_code","App","setVkGroupId","setCommunityAdmin","setVkAppId","activePanel","setActivePanel","setCommunityToken","widgetCommunityTokenStorageKey","setWidgetCommunityTokenStorageKey","setUser","ScreenSpinner","popout","setPopout","setBridgeError","setBridgeErrorMessage","setPersonTotalCount","location","href","split","splitData","filter","includes","map","fetchData","fetchAppId","appId","storageKey","fetchStorageData","formattedResult","Intl","NumberFormat","format","fetchWidgetCommunityStorageToken","keys","token","subscribe","detail","data","schemeAttribute","createAttribute","scheme","attributes","setNamedItem","fetchLunchParameters","currentTarget","dataset","to","View","access_token","JSON","stringify","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.6a506c42.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAGLH901AAABN2lDQ1BBZG9iZSBSR0IgKDE5OTgpAAAokZWPv0rDUBSHvxtFxaFWCOLgcCdRUGzVwYxJW4ogWKtDkq1JQ5ViEm6uf/oQjm4dXNx9AidHwUHxCXwDxamDQ4QMBYvf9J3fORzOAaNi152GUYbzWKt205Gu58vZF2aYAoBOmKV2q3UAECdxxBjf7wiA10277jTG+38yH6ZKAyNguxtlIYgK0L/SqQYxBMygn2oQD4CpTto1EE9AqZf7G1AKcv8ASsr1fBBfgNlzPR+MOcAMcl8BTB1da4Bakg7UWe9Uy6plWdLuJkEkjweZjs4zuR+HiUoT1dFRF8jvA2AxH2w3HblWtay99X/+PRHX82Vun0cIQCw9F1lBeKEuf1UYO5PrYsdwGQ7vYXpUZLs3cLcBC7dFtlqF8hY8Dn8AwMZP/fNTP8gAAAAJcEhZcwAALiMAAC4jAXilP3YAAAXwaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA2LjAtYzAwMiA3OS4xNjQ0NjAsIDIwMjAvMDUvMTItMTY6MDQ6MTcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMTEtMDFUMjI6NTA6MDcrMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMTEtMDFUMjI6NTA6MDcrMDM6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTExLTAxVDIyOjUwOjA3KzAzOjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhkYjRmMDg2LTZmMWEtMjQ0NC04ODBlLTY2ZDc3ZjVlNDkxMiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjc1NjA3ZjdhLWMzNTgtMjc0ZC05MjBkLWQ1YzU1MmYzNGRjMCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg2MDNhZTRiLWYxOTAtNmM0MS1iNTQyLWI1ZmZjYTA1MDhjYiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJBZG9iZSBSR0IgKDE5OTgpIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NjAzYWU0Yi1mMTkwLTZjNDEtYjU0Mi1iNWZmY2EwNTA4Y2IiIHN0RXZ0OndoZW49IjIwMjAtMTEtMDFUMjI6NTA6MDcrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OGRiNGYwODYtNmYxYS0yNDQ0LTg4MGUtNjZkNzdmNWU0OTEyIiBzdEV2dDp3aGVuPSIyMDIwLTExLTAxVDIyOjUwOjA3KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiIHN0RXZ0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\"","import React from \"react\";\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport Banner from \"@vkontakte/vkui/dist/components/Banner/Banner\";\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport FixedLayout from \"@vkontakte/vkui/dist/components/FixedLayout/FixedLayout\";\nimport PromoBanner from \"@vkontakte/vkui/dist/components/PromoBanner/PromoBanner\";\n\nconst SearchBanner = ({firstName, lastName, personCount, searchButton}) => {\n\n    const declOfNum = (n, text_forms) => {\n        n = Math.abs(n) % 100;\n        var n1 = n % 10;\n        if (n > 10 && n < 20) {\n            return text_forms[2];\n        }\n        if (n1 > 1 && n1 < 5) {\n            return text_forms[1];\n        }\n        if (n1 == 1) {\n            return text_forms[0];\n        }\n        return text_forms[2];\n    }\n\n    return (\n        <Div>\n            <Div>\n                <span>{firstName}, в базе награжденных гражданских лиц найдено {personCount} Ваших {declOfNum(personCount, ['однофамильца', 'однофамильца', 'однофамильцев'])}</span>\n            </Div>\n            <Div>\n                <Button size=\"l\"\n                        className=\"SearchButton\"\n                        title=\"Посмотреть однофамильцев\"\n                        onClick={searchButton}>\n                    Посмотреть однофамильцев\n                </Button>\n            </Div>\n        </Div>\n\n    )\n};\n\nexport default SearchBanner;\n","import React from \"react\";\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport Search from \"@vkontakte/vkui/dist/components/Search/Search\";\n\nimport './SearchBlock.css';\n\nconst SearchBlock = ({isMobileDevice, onLabelChange, handleKeyDown, searchButton, personTotalCount}) => {\n\n    const getSearchField = () => {\n        let placeHolder = \"ФИО, год рождения\";\n\n        if (!isMobileDevice()) {\n            placeHolder += \", место работы\";\n        }\n\n        return <Search\n            placeholder={placeHolder}\n            id=\"medalSearchId\"\n            type=\"text\"\n            onChange={onLabelChange}\n            onKeyDown={handleKeyDown}/>;\n    }\n\n    const getSearchTitle = () => {\n        if (personTotalCount !== null && personTotalCount!== undefined && personTotalCount !== '0') {\n            return <span>В базу внесены данные на {personTotalCount} гражданских лиц</span>;\n        } else {\n            return <span>В базу внесены данные по гражданским лицам</span>;\n        }\n    }\n\n    return (\n        <Div>\n            <Div>\n                {getSearchTitle()}\n            </Div>\n            {getSearchField()}\n            <Div>\n                <Button size=\"l\" className=\"SearchButton\"\n                        mode=\"outline\"\n                        title=\"Искать на сайте: Медаль «За оборону Ленинграда»\"\n                        onClick={searchButton}>\n                    Найти награжденных\n                </Button>\n            </Div>\n        </Div>\n    )\n};\n\nexport default SearchBlock;\n","import React, {useEffect, useState} from 'react';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\nimport Avatar from '@vkontakte/vkui/dist/components/Avatar/Avatar';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport PanelHeaderContent from '@vkontakte/vkui/dist/components/PanelHeaderContent/PanelHeaderContent';\n\nimport './Home.css';\n\nimport logo from '../../img/medal_32_32.png';\nimport Icon28SettingsOutline from \"@vkontakte/icons/dist/28/settings_outline\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport Snackbar from \"@vkontakte/vkui/dist/components/Snackbar/Snackbar\";\nimport {Icon16ErrorCircleFill} from \"@vkontakte/icons\";\nimport SearchBanner from \"./searchbanner/SearchBanner\";\nimport SearchBlock from \"./searchblock/SearchBlock\";\nimport Separator from \"@vkontakte/vkui/dist/components/Separator/Separator\";\nimport Caption from \"@vkontakte/vkui/dist/components/Typography/Caption/Caption\";\nimport Text from \"@vkontakte/vkui/dist/components/Typography/Text/Text\";\n\n\nconst Home = ({id, fetchedUser, go, vkGroupId, isCommunityAdmin, personTotalCount}) => {\n\n    const MAX_MOBILE_SCREEN_WIDTH = 576;\n\n    const [getLastName, setLastName] = useState('');\n    const [getFirstName, setFirstName] = useState('');\n    const [personCount, setPersonCount] = useState(0);\n    const [searchText, setSearchTest] = useState('');\n\n    const [widgetError, setWidgetError] = useState(false);\n    const [widgetErrorMessage, setWidgetErrorMessage] = useState(false);\n\n    useEffect(() => {\n        async function fetchUserData() {\n            const user = await bridge.send('VKWebAppGetUserInfo');\n\n            let lastName = '';\n\n            if (user.last_name !== null\n                && user.last_name !== undefined\n                && user.last_name.length > 0) {\n\n                lastName = user.last_name;\n            }\n\n            if (user.first_name !== null\n                && user.first_name !== undefined\n                && user.first_name.length > 0) {\n\n                setFirstName(user.first_name);\n            }\n\n            setLastName(lastName);\n\n            try {\n                let response = await fetch(`https://medal.spbarchives.ru/api/v1/person/count/${lastName}/`);\n                let json = await response.json();\n\n                if (json.hasOwnProperty('count') && json.count !== 'undefined' && json.count > 0) {\n                    setPersonCount(json.count);\n                    console.log(json.count)\n                }\n            } catch (e) {\n                console.log(\"Fail to fetch persons count by last_name\" + e);\n                setWidgetError(true);\n                setWidgetErrorMessage(\"Произошла ошибка в процессе получения кол-ва однофамильцев\");\n            }\n        }\n\n        fetchUserData();\n    }, []);\n\n    const openSearchWindow = (searchToken) => {\n        window.open(`https://medal.spbarchives.ru/search?query=${searchToken}&advancedSearch=false&from=vk`);\n    }\n\n    const showFoundedRecords = async () => {\n        openSearchWindow(getLastName);\n    }\n\n    const search = async () => {\n        openSearchWindow(searchText);\n    }\n\n    const _handleKeyDown = (e) => {\n        if (e.key === 'Enter') {\n            openSearchWindow(searchText);\n        }\n    }\n\n    const onLabelChange = (event) => {\n        setSearchTest(event.target.value);\n    };\n\n    const isMobileDevice = () => {\n        return document.body.clientWidth <= MAX_MOBILE_SCREEN_WIDTH;\n    }\n\n    const showWidgetConfiguration = () => {\n        return vkGroupId && isCommunityAdmin;\n    }\n\n    return (<Panel id={id}>\n            <PanelHeader right={showWidgetConfiguration() &&\n            <Button\n                onClick={go} data-to=\"configuration\"\n                title=\"Настройки виджета\"\n                before={<Icon28SettingsOutline/>}\n                mode=\"tertiary\">\n            </Button>}>\n                <PanelHeaderContent before={<Avatar size={36} src={logo}/>}>\n                    <span className=\"PageHeaderContent\"> Медаль «За оборону Ленинграда»</span>\n                </PanelHeaderContent>\n            </PanelHeader>\n            <Group>\n                <Div className=\"MainContainer\">\n\n                    {personCount > 0 &&\n                    <SearchBanner firstName={getFirstName}\n                                  lastName={getLastName}\n                                  personCount={personCount}\n                                  searchButton={showFoundedRecords}/>}\n\n                    {personCount > 0 && <Separator/> }\n\n                    <SearchBlock searchButton={search}\n                                 handleKeyDown={_handleKeyDown}\n                                 isMobileDevice={isMobileDevice}\n                                 onLabelChange={onLabelChange}\n                                 personTotalCount={personTotalCount}/>\n                </Div>\n            </Group>\n            {widgetError &&\n            <Snackbar\n                layout='vertical'\n                onClose={() => setWidgetError(null)}\n                before={<Avatar size={16} style={{backgroundColor: 'var(--accent)'}}><Icon16ErrorCircleFill fill='#fff' width={16} height={16}/></Avatar>}\n                duration={10000}>\n                {widgetErrorMessage}\n            </Snackbar>\n            }\n        </Panel>\n    )\n};\n\nexport default Home;\n","import React, {useState} from 'react';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport PanelHeaderContent from '@vkontakte/vkui/dist/components/PanelHeaderContent/PanelHeaderContent';\nimport bridge from '@vkontakte/vk-bridge';\n\nimport './Configuration.css';\nimport PanelHeaderBack from \"@vkontakte/vkui/dist/components/PanelHeaderBack/PanelHeaderBack\";\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport Input from \"@vkontakte/vkui/dist/components/Input/Input\";\nimport FormLayout from \"@vkontakte/vkui/dist/components/FormLayout/FormLayout\";\nimport Textarea from \"@vkontakte/vkui/dist/components/Textarea/Textarea\";\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport {Icon16ErrorCircleFill, Icon16InfoCirle, Icon24ListAdd} from \"@vkontakte/icons\";\nimport Snackbar from \"@vkontakte/vkui/dist/components/Snackbar/Snackbar\";\nimport Avatar from \"@vkontakte/vkui/dist/components/Avatar/Avatar\";\nimport Tabs from \"@vkontakte/vkui/dist/components/Tabs/Tabs\";\nimport TabsItem from \"@vkontakte/vkui/dist/components/TabsItem/TabsItem\";\nimport Group from \"@vkontakte/vkui/dist/components/Group/Group\";\nimport Icon24Linked from \"@vkontakte/icons/dist/24/linked\";\n\nconst Configuration = ({id, go, vkGroupId, communityToken, vkAppId, getCommunityAccessToken, bridgeError, bridgeErrorMessage, personTotalCount}) => {\n\n    const APP_LINK = \"https://vk.com/app7643740\";\n\n    const [widgetError, setWidgetError] = useState(false);\n    const [unsupportedPlatform, setUnsupportedPlatform] = useState(false);\n\n    const [title, setTitle] = useState('Медаль «За оборону Ленинграда»');\n    const [text, setText] = useState('Архивные документы о награжденных медалью');\n    const [descr, setDescr] = useState(`В базу внесены данные на ${personTotalCount} гражданских лиц`);\n    const [more, setMore] = useState('найди своих однофамильцев в архивных документах');\n    const [activeTab, setActiveTab] = useState('widget');\n    const [moreUrl, setMoreUrl] = useState(APP_LINK);\n\n    const onTitleChange = (event) => {\n        setTitle(event.target.value);\n    };\n\n    const onTextChange = (event) => {\n        setText(event.target.value);\n    };\n\n    const onDescrChange = (event) => {\n        setDescr(event.target.value);\n    };\n\n    const onMoreChange = (event) => {\n        setMore(event.target.value);\n    };\n\n    const onMoreUrlChange = (event) => {\n        setMoreUrl(event.target.value);\n    };\n\n    const addWidget = () => {\n        try {\n            let groupId = Number(vkGroupId);\n\n            bridge.send(\"VKWebAppShowCommunityWidgetPreviewBox\",\n                {\n                    \"group_id\": groupId, \"type\": \"text\", \"code\": `var first_name = API.users.get({})@.first_name;\n\n                                                                      if (first_name) { \n                                                                         first_name = first_name + \", \";\n                                                                      } else {\n                                                                         first_name = \"Авторизуйся и \";\n                                                                      }\n                                                                              \n                                                                       return { title: '${title}', title_url: '${moreUrl}', text: '${text}', descr: '${descr}', more: first_name + '${more}', more_url: '${moreUrl}' };`\n                })\n                .then(r => console.log(r.result))\n                .catch(e => {\n                    if (e.error_data.error_code === 6) {\n                        setUnsupportedPlatform(true);\n                        return;\n                    }\n\n                    if (e.error_data.error_code !== 4) {\n                        setWidgetError(true);\n                        console.log(e);\n                    }\n                });\n\n        } catch (e) {\n            if (e.error_data.error_code === 6) {\n                setUnsupportedPlatform(true);\n                return;\n            }\n\n            if (e.error_data.error_code !== 4) {\n                setWidgetError(true);\n                console.log(e);\n            }\n        }\n    }\n\n    return (<Panel id={id}>\n            <PanelHeader left={<PanelHeaderBack onClick={go} data-to=\"home\"/>}>\n                <PanelHeaderContent>\n                    <span class=\"PageHeaderContent\">Настройки</span>\n                </PanelHeaderContent>\n            </PanelHeader>\n            <Tabs>\n                <TabsItem\n                    onClick={() => setActiveTab('widget')}\n                    selected={activeTab === 'widget'}>\n                    Настройки виджета\n                </TabsItem>\n                <TabsItem\n                    onClick={() => setActiveTab('appConfig')}\n                    selected={activeTab === 'appConfig'}>\n                    Настройки приложения\n                </TabsItem>\n            </Tabs>\n\n            <Group>\n                {activeTab === 'widget' &&\n                <FormLayout>\n                    <Input id=\"titleId\"\n                           top=\"Заголовок виджета, до 100 символов\"\n                           maxLength=\"100\"\n                           value={title}\n                           status={title ? 'valid' : 'error'}\n                           bottom={title ? '' : 'Пожалуйста, укажите что-то в заголовке виджета'}\n                           onChange={onTitleChange}/>\n\n                    <Textarea id=\"textId\"\n                              top=\"Текст для отображения в виджете, до 200 символов\"\n                              maxLength=\"200\"\n                              value={text}\n                              status={text ? 'valid' : 'error'}\n                              bottom={text ? '' : 'Пожалуйста, заполните текст в виджите'}\n                              onChange={onTextChange}/>\n\n                    <Textarea id=\"descrId\"\n                              top=\"Описание для отображения в виджете, до 200 символов\"\n                              maxLength=\"200\"\n                              value={descr}\n                              status={descr ? 'valid' : 'error'}\n                              bottom={descr ? '' : 'Пожалуйста, заполните описание'}\n                              onChange={onDescrChange}/>\n\n                    <Input id=\"moreId\"\n                           top=\"Текст в футере, до 100 символов\"\n                           maxLength=\"100\"\n                           value={more}\n                           status={more ? 'valid' : 'error'}\n                           bottom={more ? '' : 'Пожалуйста, укажите наименование ссылки'}\n                           onChange={onMoreChange}/>\n\n                    <Input id=\"moreUrlId\"\n                           maxLength=\"10000\"\n                           top=\"URL для футера. Обязателен, если указан текст в футере\"\n                           value={moreUrl}\n                           status={moreUrl ? 'valid' : 'error'}\n                           bottom={moreUrl ? '' : 'Ссылка на приложение должно быть обязательна'}\n                           onChange={onMoreUrlChange}\n                           disabled/>\n\n                    <Div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n                        <Button mode=\"primary\" size=\"l\" className=\"SearchButton\" title=\"Опубликовать виджет\" onClick={addWidget} before={<Icon24ListAdd/>}>Опубликовать виджет</Button>\n                    </Div>\n                </FormLayout>}\n                {activeTab === 'appConfig' &&\n                <FormLayout>\n                    <Input id=\"appId\"\n                           top=\"Идентификатор приложения\"\n                           value={vkAppId}/>\n\n                    <Input id=\"groupId\"\n                              top=\"Идентификатор группы\"\n                              value={vkGroupId}/>\n\n                    <Input id=\"tokenId\"\n                              top=\"Токен доступа - для обновления виджета\"\n                              value={communityToken}/>\n\n                    <Div style={{display: \"flex\", justifyContent: \"space-between\"}}>\n                        <Button mode=\"primary\"\n                                size=\"l\"\n                                className=\"SearchButton\"\n                                title=\"Получить и сохранить токен доступа в хринилище\"\n                                onClick={getCommunityAccessToken}\n                                before={<Icon24Linked/>}>Получить и сохранить токен доступа в хринилище</Button>\n                    </Div>\n                </FormLayout>}\n            </Group>\n\n            {widgetError &&\n            <Snackbar\n                layout='vertical'\n                onClose={() => setWidgetError(null)}\n                before={<Avatar size={16} style={{backgroundColor: 'var(--accent)'}}><Icon16ErrorCircleFill fill='#fff' width={16} height={16}/></Avatar>}\n                duration={10000}>\n                Произошла ошибка при добавлении виджета !\n            </Snackbar>\n            }\n\n            {unsupportedPlatform &&\n            <Snackbar\n                layout='vertical'\n                onClose={() => setWidgetError(null)}\n                before={<Avatar size={16} style={{backgroundColor: 'var(--accent)'}}><Icon16InfoCirle fill='#fff' width={16} height={16}/></Avatar>}\n                duration={10000}>\n                Данная платформа не поддерживается\n            </Snackbar>\n            }\n\n            {bridgeError &&\n                <Snackbar\n                    layout='vertical'\n                    onClose={() => setWidgetError(null)}\n                    before={<Avatar size={16} style={{backgroundColor: 'var(--accent)'}}><Icon16ErrorCircleFill fill='#fff' width={16} height={16}/></Avatar>}\n                    duration={10000}>\n                    {bridgeErrorMessage}\n                </Snackbar>\n            }\n\n        </Panel>\n    )\n};\n\nexport default Configuration;\n","import React, {useEffect, useState} from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/home/Home';\nimport Configuration from \"./panels/configuration/Configuration\";\n\nconst App = () => {\n\n    const STORE_WIDGET_SCOPE = \"app_widget\";\n\n    const [vkGroupId, setVkGroupId] = useState(-1);\n    const [isCommunityAdmin, setCommunityAdmin] = useState(false);\n    const [vkAppId, setVkAppId] = useState(null);\n    const [activePanel, setActivePanel] = useState('home');\n    const [communityToken, setCommunityToken] = useState('');\n    const [widgetCommunityTokenStorageKey, setWidgetCommunityTokenStorageKey] = useState('');\n    const [fetchedUser, setUser] = useState(null);\n    const [popout, setPopout] = useState(<ScreenSpinner size='large'/>);\n    const [bridgeError, setBridgeError] = useState(false);\n    const [bridgeErrorMessage, setBridgeErrorMessage] = useState('');\n    const [personTotalCount, setPersonTotalCount] = useState(0);\n\n\n\n\n    useEffect(() => {\n        bridge.subscribe(({detail: {type, data}}) => {\n            if (type === 'VKWebAppUpdateConfig') {\n                const schemeAttribute = document.createAttribute('scheme');\n                schemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n                document.body.attributes.setNamedItem(schemeAttribute);\n            }\n        });\n\n        async function fetchLunchParameters() {\n\n            const splitData = await window.location.href.split('&');\n\n            if (splitData && splitData.filter(value=> value.includes(\"vk_viewer_group_role\")).map(value => value.split('=')[1])[0] === 'admin') {\n                setCommunityAdmin(true);\n            }\n\n            const fetchData = await splitData.filter(value => value.includes(\"vk_group_id\")).map(value => value.split('=')[1]);\n            const groupId = fetchData[0];\n            setVkGroupId(groupId);\n\n            const fetchAppId = await splitData.filter(value => value.includes(\"vk_app_id\")).map(value => value.split('=')[1]);\n            const appId = fetchAppId[0];\n            setVkAppId(appId);\n\n            if (appId !== null && groupId !== null) {\n                const storageKey = appId + \"_\" + groupId + \"_\" + STORE_WIDGET_SCOPE;\n\n                setWidgetCommunityTokenStorageKey(storageKey);\n\n                await fetchStorageData(storageKey);\n            }\n\n            try {\n                let response = await fetch(`https://medal.spbarchives.ru/api/v1/person/total/count/`);\n                let json = await response.json();\n\n                if (json.hasOwnProperty('count') && json.count !== 'undefined' && json.count > 0) {\n                    let formattedResult = new Intl.NumberFormat('ru-RU').format(json.count);\n\n                    setPersonTotalCount(formattedResult);\n                    console.log(formattedResult)\n                }\n            } catch (e) {\n                console.log(\"Fail to fetch persons count by last_name\" + e);\n            }\n        }\n\n        async function fetchData() {\n            const user = await bridge.send('VKWebAppGetUserInfo');\n            setUser(user);\n            setPopout(null);\n        }\n\n        async function fetchStorageData(storageKey) {\n            try {\n                const fetchWidgetCommunityStorageToken = await bridge.send(\"VKWebAppStorageGet\", {\"keys\": [`${storageKey}`]});\n\n                if (fetchWidgetCommunityStorageToken !== null\n                    && fetchWidgetCommunityStorageToken !== undefined\n                    && fetchWidgetCommunityStorageToken.hasOwnProperty(\"keys\")\n                    && fetchWidgetCommunityStorageToken.keys.length > 0) {\n                    if (fetchWidgetCommunityStorageToken.keys[0].key === storageKey) {\n                        let token = fetchWidgetCommunityStorageToken.keys[0].value;\n                        setCommunityToken(token);\n                    }\n                }\n\n            } catch (e) {\n                setBridgeError(true);\n                setBridgeErrorMessage('Ошибка при получении данных из хранилища');\n            }\n\n        }\n\n        fetchData();\n        fetchLunchParameters();\n    }, []);\n\n    const go = e => {\n        setActivePanel(e.currentTarget.dataset.to);\n    };\n\n    const getCommunityAccessToken = () => {\n        bridge.send(\"VKWebAppGetCommunityToken\", {\"app_id\": Number(vkAppId), \"group_id\": Number(vkGroupId), \"scope\": STORE_WIDGET_SCOPE}).then(result=> {\n            const token = result.access_token;\n            bridge.send(\"VKWebAppStorageSet\", {\"key\": widgetCommunityTokenStorageKey, \"value\": token}).then(()=>{\n                setCommunityToken(token);\n            }).catch(e=> {\n                setBridgeError(true);\n                setBridgeErrorMessage('Ошибка при сохранении сгенерированного токена в хранилище');\n                console.log(JSON.stringify(e));\n            });\n        }).catch(e=> {\n            setBridgeError(true);\n            setBridgeErrorMessage('Ошибка при получении токена доступа для сообщества');\n            console.log(JSON.stringify(e));\n        });\n    }\n\n    return (\n        <View activePanel={activePanel} popout={popout}>\n\n            <Home id='home'\n                  fetchedUser={fetchedUser}\n                  go={go}\n                  vkGroupId={vkGroupId}\n                  isCommunityAdmin={isCommunityAdmin}\n                  personTotalCount={personTotalCount}/>\n\n            <Configuration id='configuration' go={go}\n                           vkGroupId={vkGroupId}\n                           communityToken={communityToken}\n                           vkAppId={vkAppId}\n                           getCommunityAccessToken={getCommunityAccessToken}\n                           bridgeError={bridgeError}\n                           bridgeErrorMessage={bridgeErrorMessage}\n                           personTotalCount={personTotalCount}/>\n\n        </View>\n    );\n}\n\nexport default App;\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}