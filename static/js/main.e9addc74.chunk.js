(this["webpackJsonpvk-medal-spbarchives"]=this["webpackJsonpvk-medal-spbarchives"]||[]).push([[0],{118:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAGLH901AAABN2lDQ1BBZG9iZSBSR0IgKDE5OTgpAAAokZWPv0rDUBSHvxtFxaFWCOLgcCdRUGzVwYxJW4ogWKtDkq1JQ5ViEm6uf/oQjm4dXNx9AidHwUHxCXwDxamDQ4QMBYvf9J3fORzOAaNi152GUYbzWKt205Gu58vZF2aYAoBOmKV2q3UAECdxxBjf7wiA10277jTG+38yH6ZKAyNguxtlIYgK0L/SqQYxBMygn2oQD4CpTto1EE9AqZf7G1AKcv8ASsr1fBBfgNlzPR+MOcAMcl8BTB1da4Bakg7UWe9Uy6plWdLuJkEkjweZjs4zuR+HiUoT1dFRF8jvA2AxH2w3HblWtay99X/+PRHX82Vun0cIQCw9F1lBeKEuf1UYO5PrYsdwGQ7vYXpUZLs3cLcBC7dFtlqF8hY8Dn8AwMZP/fNTP8gAAAAJcEhZcwAALiMAAC4jAXilP3YAAAXwaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA2LjAtYzAwMiA3OS4xNjQ0NjAsIDIwMjAvMDUvMTItMTY6MDQ6MTcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChXaW5kb3dzKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMTEtMDFUMjI6NTA6MDcrMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMTEtMDFUMjI6NTA6MDcrMDM6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTExLTAxVDIyOjUwOjA3KzAzOjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhkYjRmMDg2LTZmMWEtMjQ0NC04ODBlLTY2ZDc3ZjVlNDkxMiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjc1NjA3ZjdhLWMzNTgtMjc0ZC05MjBkLWQ1YzU1MmYzNGRjMCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg2MDNhZTRiLWYxOTAtNmM0MS1iNTQyLWI1ZmZjYTA1MDhjYiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJBZG9iZSBSR0IgKDE5OTgpIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NjAzYWU0Yi1mMTkwLTZjNDEtYjU0Mi1iNWZmY2EwNTA4Y2IiIHN0RXZ0OndoZW49IjIwMjAtMTEtMDFUMjI6NTA6MDcrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OGRiNGYwODYtNmYxYS0yNDQ0LTg4MGUtNjZkNzdmNWU0OTEyIiBzdEV2dDp3aGVuPSIyMDIwLTExLTAxVDIyOjUwOjA3KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMiAoV2luZG93cykiIHN0RXZ0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"},126:function(e,t,a){e.exports=a(236)},205:function(e,t,a){},212:function(e,t,a){},226:function(e,t,a){},236:function(e,t,a){"use strict";a.r(t);a(127),a(153),a(155),a(156),a(158),a(159),a(160),a(161),a(162),a(163),a(164),a(165),a(167),a(168),a(169),a(170),a(171),a(172),a(173),a(174),a(175),a(176),a(178),a(179),a(180),a(181),a(182),a(183),a(184),a(185),a(186),a(187),a(188),a(189),a(190),a(191),a(192),a(193),a(194),a(195);var n=a(0),r=a.n(n),c=a(117),o=a.n(c),l=a(21),i=a.n(l),u=a(18),s=a.n(u),m=a(41),d=a(6),p=a(84),b=a.n(p),f=a(124),v=a.n(f),h=(a(204),a(61)),A=a.n(h),g=a(36),j=a.n(g),E=a(64),O=a.n(E),I=a(22),w=a.n(I),y=a(46),S=a.n(y),Z=a(62),k=a.n(Z),M=a(63),C=a.n(M),G=(a(205),a(118)),Y=a.n(G),N=a(120),R=a.n(N),D=a(49),x=a.n(D),U=a(241),W=function(e){var t=e.firstName,a=(e.lastName,e.personCount),n=e.searchButton;return r.a.createElement(w.a,null,r.a.createElement(w.a,null,r.a.createElement("span",null,t,", \u0432 \u0431\u0430\u0437\u0435 \u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u043d\u044b\u0445 \u0433\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u0438\u0445 \u043b\u0438\u0446 \u043d\u0430\u0439\u0434\u0435\u043d\u043e ",a," \u0412\u0430\u0448\u0438\u0445 ",function(e,t){var a=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:a>1&&a<5?t[1]:1==a?t[0]:t[2]}(a,["\u043e\u0434\u043d\u043e\u0444\u0430\u043c\u0438\u043b\u044c\u0446\u0430","\u043e\u0434\u043d\u043e\u0444\u0430\u043c\u0438\u043b\u044c\u0446\u0430","\u043e\u0434\u043d\u043e\u0444\u0430\u043c\u0438\u043b\u044c\u0446\u0435\u0432"]))),r.a.createElement(w.a,null,r.a.createElement(j.a,{size:"l",className:"SearchButton",title:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u0434\u043d\u043e\u0444\u0430\u043c\u0438\u043b\u044c\u0446\u0435\u0432",onClick:n},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u0434\u043d\u043e\u0444\u0430\u043c\u0438\u043b\u044c\u0446\u0435\u0432")))},T=a(119),V=a.n(T),z=(a(212),function(e){var t=e.isMobileDevice,a=e.onLabelChange,n=e.handleKeyDown,c=e.searchButton,o=e.personTotalCount;return r.a.createElement(w.a,null,r.a.createElement(w.a,null,null!==o&&void 0!==o&&"0"!==o?r.a.createElement("span",null,"\u0412 \u0431\u0430\u0437\u0443 \u0432\u043d\u0435\u0441\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0430 ",o," \u0433\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u0438\u0445 \u043b\u0438\u0446"):r.a.createElement("span",null,"\u0412 \u0431\u0430\u0437\u0443 \u0432\u043d\u0435\u0441\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u0433\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u0438\u043c \u043b\u0438\u0446\u0430\u043c")),function(){var e="\u0424\u0418\u041e, \u0433\u043e\u0434 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f";return t()||(e+=", \u043c\u0435\u0441\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u044b"),r.a.createElement(V.a,{placeholder:e,id:"medalSearchId",type:"text",onChange:a,onKeyDown:n})}(),r.a.createElement(w.a,null,r.a.createElement(j.a,{size:"l",className:"SearchButton",mode:"outline",title:"\u0418\u0441\u043a\u0430\u0442\u044c \u043d\u0430 \u0441\u0430\u0439\u0442\u0435: \u041c\u0435\u0434\u0430\u043b\u044c \xab\u0417\u0430 \u043e\u0431\u043e\u0440\u043e\u043d\u0443 \u041b\u0435\u043d\u0438\u043d\u0433\u0440\u0430\u0434\u0430\xbb",onClick:c},"\u041d\u0430\u0439\u0442\u0438 \u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u043d\u044b\u0445")))}),B=a(60),H=a.n(B),L=function(e){var t=e.id,a=(e.fetchedUser,e.go),c=e.vkGroupId,o=e.isCommunityAdmin,l=e.personTotalCount,u=Object(n.useState)(""),p=Object(d.a)(u,2),b=p[0],f=p[1],v=Object(n.useState)(""),h=Object(d.a)(v,2),g=h[0],E=h[1],I=Object(n.useState)(0),y=Object(d.a)(I,2),Z=y[0],M=y[1],G=Object(n.useState)(""),N=Object(d.a)(G,2),D=N[0],T=N[1],V=Object(n.useState)(!1),B=Object(d.a)(V,2),L=B[0],J=B[1],K=Object(n.useState)(!1),Q=Object(d.a)(K,2),X=Q[0],F=Q[1];Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetUserInfo");case 2:return t=e.sent,a="",null!==t.last_name&&void 0!==t.last_name&&t.last_name.length>0&&(a=t.last_name),null!==t.first_name&&void 0!==t.first_name&&t.first_name.length>0&&E(t.first_name),f(a),e.prev=7,e.next=10,fetch("https://medal.spbarchives.ru/api/v1/person/count/".concat(a,"/"));case 10:return n=e.sent,e.next=13,n.json();case 13:(r=e.sent).hasOwnProperty("count")&&"undefined"!==r.count&&r.count>0&&(M(r.count),console.log(r.count)),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(7),console.log("Fail to fetch persons count by last_name"+e.t0),J(!0),F("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043a\u043e\u043b-\u0432\u0430 \u043e\u0434\u043d\u043e\u0444\u0430\u043c\u0438\u043b\u044c\u0446\u0435\u0432");case 22:case"end":return e.stop()}}),e,null,[[7,17]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var P=function(e){window.open("https://medal.spbarchives.ru/search?query=".concat(e,"&advancedSearch=false&from=vk"))},_=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(b);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(D);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(A.a,{id:t},r.a.createElement(k.a,{right:c&&o&&r.a.createElement(j.a,{onClick:a,"data-to":"configuration",title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u0438\u0434\u0436\u0435\u0442\u0430",before:r.a.createElement(R.a,null),mode:"tertiary"})},r.a.createElement(C.a,{before:r.a.createElement(S.a,{size:36,src:Y.a})},r.a.createElement("span",{className:"PageHeaderContent"}," \u041c\u0435\u0434\u0430\u043b\u044c \xab\u0417\u0430 \u043e\u0431\u043e\u0440\u043e\u043d\u0443 \u041b\u0435\u043d\u0438\u043d\u0433\u0440\u0430\u0434\u0430\xbb"))),r.a.createElement(O.a,null,r.a.createElement(w.a,{className:"MainContainer"},Z>0&&r.a.createElement(W,{firstName:g,lastName:b,personCount:Z,searchButton:_}),Z>0&&r.a.createElement(H.a,null),r.a.createElement(z,{searchButton:q,handleKeyDown:function(e){"Enter"===e.key&&P(D)},isMobileDevice:function(){return document.body.clientWidth<=576},onLabelChange:function(e){T(e.target.value)},personTotalCount:l}))),L&&r.a.createElement(x.a,{layout:"vertical",onClose:function(){return J(null)},before:r.a.createElement(S.a,{size:16,style:{backgroundColor:"var(--accent)"}},r.a.createElement(U.a,{fill:"#fff",width:16,height:16})),duration:1e4},X))},J=(a(226),a(121)),K=a.n(J),Q=a(47),X=a.n(Q),F=a(86),P=a.n(F),_=a(87),q=a.n(_),$=a(242),ee=a(243),te=a(122),ae=a.n(te),ne=a(85),re=a.n(ne),ce=a(123),oe=a.n(ce),le=function(e){var t=e.id,a=e.go,c=e.vkGroupId,o=e.communityToken,l=e.vkAppId,u=e.getCommunityAccessToken,s=e.bridgeError,m=e.bridgeErrorMessage,p=e.personTotalCount,b=Object(n.useState)(!1),f=Object(d.a)(b,2),v=f[0],h=f[1],g=Object(n.useState)(!1),E=Object(d.a)(g,2),I=E[0],y=E[1],Z=Object(n.useState)("\u041c\u0435\u0434\u0430\u043b\u044c \xab\u0417\u0430 \u043e\u0431\u043e\u0440\u043e\u043d\u0443 \u041b\u0435\u043d\u0438\u043d\u0433\u0440\u0430\u0434\u0430\xbb"),M=Object(d.a)(Z,2),G=M[0],Y=M[1],N=Object(n.useState)("\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043e \u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u043d\u044b\u0445 \u043c\u0435\u0434\u0430\u043b\u044c\u044e"),R=Object(d.a)(N,2),D=R[0],W=R[1],T=Object(n.useState)("\u0412 \u0431\u0430\u0437\u0443 \u0432\u043d\u0435\u0441\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0430 ".concat(p," \u0433\u0440\u0430\u0436\u0434\u0430\u043d\u0441\u043a\u0438\u0445 \u043b\u0438\u0446")),V=Object(d.a)(T,2),z=V[0],B=V[1],H=Object(n.useState)("\u043d\u0430\u0439\u0434\u0438 \u0441\u0432\u043e\u0438\u0445 \u043e\u0434\u043d\u043e\u0444\u0430\u043c\u0438\u043b\u044c\u0446\u0435\u0432 \u0432 \u0430\u0440\u0445\u0438\u0432\u043d\u044b\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445"),L=Object(d.a)(H,2),J=L[0],Q=L[1],F=Object(n.useState)("widget"),_=Object(d.a)(F,2),te=_[0],ne=_[1],ce=Object(n.useState)("https://vk.com/app7643740"),le=Object(d.a)(ce,2),ie=le[0],ue=le[1];return r.a.createElement(A.a,{id:t},r.a.createElement(k.a,{left:r.a.createElement(K.a,{onClick:a,"data-to":"home"})},r.a.createElement(C.a,null,r.a.createElement("span",{class:"PageHeaderContent"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"))),r.a.createElement(ae.a,null,r.a.createElement(re.a,{onClick:function(){return ne("widget")},selected:"widget"===te},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u0438\u0434\u0436\u0435\u0442\u0430"),r.a.createElement(re.a,{onClick:function(){return ne("appConfig")},selected:"appConfig"===te},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f")),r.a.createElement(O.a,null,"widget"===te&&r.a.createElement(P.a,null,r.a.createElement(X.a,{id:"titleId",top:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0432\u0438\u0434\u0436\u0435\u0442\u0430, \u0434\u043e 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",maxLength:"100",value:G,status:G?"valid":"error",bottom:G?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0447\u0442\u043e-\u0442\u043e \u0432 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0435 \u0432\u0438\u0434\u0436\u0435\u0442\u0430",onChange:function(e){Y(e.target.value)}}),r.a.createElement(q.a,{id:"textId",top:"\u0422\u0435\u043a\u0441\u0442 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432 \u0432\u0438\u0434\u0436\u0435\u0442\u0435, \u0434\u043e 200 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",maxLength:"200",value:D,status:D?"valid":"error",bottom:D?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0432 \u0432\u0438\u0434\u0436\u0438\u0442\u0435",onChange:function(e){W(e.target.value)}}),r.a.createElement(q.a,{id:"descrId",top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0432 \u0432\u0438\u0434\u0436\u0435\u0442\u0435, \u0434\u043e 200 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",maxLength:"200",value:z,status:z?"valid":"error",bottom:z?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",onChange:function(e){B(e.target.value)}}),r.a.createElement(X.a,{id:"moreId",top:"\u0422\u0435\u043a\u0441\u0442 \u0432 \u0444\u0443\u0442\u0435\u0440\u0435, \u0434\u043e 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",maxLength:"100",value:J,status:J?"valid":"error",bottom:J?"":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0441\u044b\u043b\u043a\u0438",onChange:function(e){Q(e.target.value)}}),r.a.createElement(X.a,{id:"moreUrlId",maxLength:"10000",top:"URL \u0434\u043b\u044f \u0444\u0443\u0442\u0435\u0440\u0430. \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d, \u0435\u0441\u043b\u0438 \u0443\u043a\u0430\u0437\u0430\u043d \u0442\u0435\u043a\u0441\u0442 \u0432 \u0444\u0443\u0442\u0435\u0440\u0435",value:ie,status:ie?"valid":"error",bottom:ie?"":"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430",onChange:function(e){ue(e.target.value)},disabled:!0}),r.a.createElement(w.a,{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(j.a,{mode:"primary",size:"l",className:"SearchButton",title:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442",onClick:function(){try{var e=Number(c);i.a.send("VKWebAppShowCommunityWidgetPreviewBox",{group_id:e,type:"text",code:'var first_name = API.users.get({})@.first_name;\n\n                                                                      if (first_name) { \n                                                                         first_name = first_name + ", ";\n                                                                      } else {\n                                                                         first_name = "\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0441\u044f \u0438 ";\n                                                                      }\n                                                                              \n                                                                       return { title: \''.concat(G,"', title_url: '").concat(ie,"', text: '").concat(D,"', descr: '").concat(z,"', more: first_name + '").concat(J,"', more_url: '").concat(ie,"' };")}).then((function(e){return console.log(e.result)})).catch((function(e){6!==e.error_data.error_code?4!==e.error_data.error_code&&(h(!0),console.log(e)):y(!0)}))}catch(t){if(6===t.error_data.error_code)return void y(!0);4!==t.error_data.error_code&&(h(!0),console.log(t))}},before:r.a.createElement($.a,null)},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0432\u0438\u0434\u0436\u0435\u0442"))),"appConfig"===te&&r.a.createElement(P.a,null,r.a.createElement(X.a,{id:"appId",top:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f",value:l}),r.a.createElement(X.a,{id:"groupId",top:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0433\u0440\u0443\u043f\u043f\u044b",value:c}),r.a.createElement(X.a,{id:"tokenId",top:"\u0422\u043e\u043a\u0435\u043d \u0434\u043e\u0441\u0442\u0443\u043f\u0430 - \u0434\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0436\u0435\u0442\u0430",value:o}),r.a.createElement(w.a,{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(j.a,{mode:"primary",size:"l",className:"SearchButton",title:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432 \u0445\u0440\u0438\u043d\u0438\u043b\u0438\u0449\u0435",onClick:u,before:r.a.createElement(oe.a,null)},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432 \u0445\u0440\u0438\u043d\u0438\u043b\u0438\u0449\u0435")))),v&&r.a.createElement(x.a,{layout:"vertical",onClose:function(){return h(null)},before:r.a.createElement(S.a,{size:16,style:{backgroundColor:"var(--accent)"}},r.a.createElement(U.a,{fill:"#fff",width:16,height:16})),duration:1e4},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0432\u0438\u0434\u0436\u0435\u0442\u0430 !"),I&&r.a.createElement(x.a,{layout:"vertical",onClose:function(){return h(null)},before:r.a.createElement(S.a,{size:16,style:{backgroundColor:"var(--accent)"}},r.a.createElement(ee.a,{fill:"#fff",width:16,height:16})),duration:1e4},"\u0414\u0430\u043d\u043d\u0430\u044f \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f"),s&&r.a.createElement(x.a,{layout:"vertical",onClose:function(){return h(null)},before:r.a.createElement(S.a,{size:16,style:{backgroundColor:"var(--accent)"}},r.a.createElement(U.a,{fill:"#fff",width:16,height:16})),duration:1e4},m))},ie=function(){var e=Object(n.useState)(-1),t=Object(d.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(d.a)(o,2),u=l[0],p=l[1],f=Object(n.useState)(null),h=Object(d.a)(f,2),A=h[0],g=h[1],j=Object(n.useState)("home"),E=Object(d.a)(j,2),O=E[0],I=E[1],w=Object(n.useState)(""),y=Object(d.a)(w,2),S=y[0],Z=y[1],k=Object(n.useState)(""),M=Object(d.a)(k,2),C=M[0],G=M[1],Y=Object(n.useState)(null),N=Object(d.a)(Y,2),R=N[0],D=N[1],x=Object(n.useState)(r.a.createElement(v.a,{size:"large"})),U=Object(d.a)(x,2),W=U[0],T=U[1],V=Object(n.useState)(!1),z=Object(d.a)(V,2),B=z[0],H=z[1],J=Object(n.useState)(""),K=Object(d.a)(J,2),Q=K[0],X=K[1],F=Object(n.useState)(0),P=Object(d.a)(F,2),_=P[0],q=P[1];Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(s.a.mark((function e(){var t,n,r,o,l,i,u,m,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.location.href.split("&");case 2:return(t=e.sent)&&"admin"===t.filter((function(e){return e.includes("vk_viewer_group_role")})).map((function(e){return e.split("=")[1]}))[0]&&p(!0),e.next=6,t.filter((function(e){return e.includes("vk_group_id")})).map((function(e){return e.split("=")[1]}));case 6:return n=e.sent,r=n[0],c(r),e.next=11,t.filter((function(e){return e.includes("vk_app_id")})).map((function(e){return e.split("=")[1]}));case 11:if(o=e.sent,l=o[0],g(l),null===l||null===r){e.next=19;break}return G(i=l+"_"+r+"_app_widget"),e.next=19,a(i);case 19:return e.prev=19,e.next=22,fetch("https://medal.spbarchives.ru/api/v1/person/total/count/");case 22:return u=e.sent,e.next=25,u.json();case 25:(m=e.sent).hasOwnProperty("count")&&"undefined"!==m.count&&m.count>0&&(d=new Intl.NumberFormat("ru-RU").format(m.count),q(d),console.log(d)),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(19),console.log("Fail to fetch persons count by last_name"+e.t0);case 32:case"end":return e.stop()}}),e,null,[[19,29]])})))).apply(this,arguments)}function t(){return(t=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,D(t),T(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(e){return n.apply(this,arguments)}function n(){return(n=Object(m.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.send("VKWebAppStorageGet",{keys:["".concat(t)]});case 3:null!==(a=e.sent)&&void 0!==a&&a.hasOwnProperty("keys")&&a.keys.length>0&&a.keys[0].key===t&&(n=a.keys[0].value,Z(n)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),H(!0),X("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}i.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){t.apply(this,arguments)}(),function(){e.apply(this,arguments)}()}),[]);var $=function(e){I(e.currentTarget.dataset.to)};return r.a.createElement(b.a,{activePanel:O,popout:W},r.a.createElement(L,{id:"home",fetchedUser:R,go:$,vkGroupId:a,isCommunityAdmin:u,personTotalCount:_}),r.a.createElement(le,{id:"configuration",go:$,vkGroupId:a,communityToken:S,vkAppId:A,getCommunityAccessToken:function(){i.a.send("VKWebAppGetCommunityToken",{app_id:Number(A),group_id:Number(a),scope:"app_widget"}).then((function(e){var t=e.access_token;i.a.send("VKWebAppStorageSet",{key:C,value:t}).then((function(){Z(t)})).catch((function(e){H(!0),X("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0442\u043e\u043a\u0435\u043d\u0430 \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435"),console.log(JSON.stringify(e))}))})).catch((function(e){H(!0),X("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0442\u043e\u043a\u0435\u043d\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0434\u043b\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430"),console.log(JSON.stringify(e))}))},bridgeError:B,bridgeErrorMessage:Q,personTotalCount:_}))};i.a.send("VKWebAppInit"),o.a.render(r.a.createElement(ie,null),document.getElementById("root"))}},[[126,1,2]]]);
//# sourceMappingURL=main.e9addc74.chunk.js.map